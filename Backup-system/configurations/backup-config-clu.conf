# Borg Backup Configuration - CLU Memory System Integration
# Add these modifications to your existing backup-config.conf on SARK

# Add CLU memory system data to backup sources
# This will include all memory system data from CLU (192.168.68.71)
BACKUP_SOURCES=(
    "/home/maxvamp"
    "/etc"
    "/root"
    "/opt"
    "/usr/local"
    "/var/lib/docker/volumes"
    # CLU Memory System Data - Add this line:
    "/backup-source/opt/memory-system"  # This will be mounted from 192.168.68.71
)

# Update EXCLUDE_PATTERNS to handle CLU data
EXCLUDE_PATTERNS=(
    # Cache and temporary files (BUT NOT HUGGINGFACE!)
    "**/.cache/pip"
    "**/.cache/mozilla"
    "**/.cache/thumbnails"
    "**/.local/share/Trash"
    "/tmp"
    "/var/tmp"

    # Python bytecode
    "**/__pycache__"
    "**/*.pyc"
    "**/*.pyo"

    # Anaconda (large, can be reinstalled)
    "/home/maxvamp/anaconda3"

    # Docker runtime data - exclude specific subdirectories instead of all volumes
    "/var/lib/docker/overlay2"
    "/var/lib/docker/image"
    "/var/lib/docker/containers"
    "/var/lib/docker/buildkit"
    "/var/lib/docker/network"
    "/var/lib/docker/tmp"

    # Docker volumes - exclude only ephemeral ones, keep important data
    "/var/lib/docker/volumes/open-webui"

    # CRITICAL: Exclude the backup drive itself!
    "/mnt/borg-backup"

    # Virtual filesystems (never backup)
    "/dev"
    "/proc"
    "/sys"
    "/run"

    # Snap packages (can be reinstalled)
    "/snap"

    # Log files (optional - comment out if you want logs backed up)
    "**/*.log"

    # CLU-specific exclusions
    # Exclude CLU system files that shouldn't be backed up
    "/backup-source/proc"
    "/backup-source/sys"
    "/backup-source/dev"
    "/backup-source/run"
    "/backup-source/tmp"
    "/backup-source/var/tmp"
    "/backup-source/home/maxvamp/.cache"
    "/backup-source/home/maxvamp/.local/share/Trash"
)